package dre.elfocrash.roboto.ai;

import java.util.ArrayList;
import java.util.List;

import dre.elfocrash.roboto.FFFFakePlayer;
import dre.elfocrash.roboto.ai.addon.IIIIConsumableSpender;
import dre.elfocrash.roboto.helpers.FFFFakeHelpers;
import dre.elfocrash.roboto.model.HHHHealingSpell;
import dre.elfocrash.roboto.model.OOOOffensiveSpell;
import dre.elfocrash.roboto.model.SSSSupportSpell;

import net.sf.l2j.gameserver.model.ShotType;

public class SSSSaggitariusAI extends CCCCombatAI implements IIIIConsumableSpender
{
    public SSSSaggitariusAI(FFFFakePlayer character)
    {
        super(character);
    }
    
    @Override
    public void thinkAndAct()
    {       
        super.thinkAndAct();
        setBusyThinking(true);
        
        applyDefaultBuffs();
        selfSupportBuffs();
        
        // Διαχείριση βελών (arrows)
        handleConsumable(_ffffakePlayer, getArrowId());
        // Διαχείριση shots (soulshots/spiritshots)
        handleShots();
        
        tryTargetAttackerOrRandomMob(FFFFakeHelpers.getTestTargetClass(), FFFFakeHelpers.getTestTargetRange());
        tryAttackingUsingFighterOffensiveSkill();
        
        setBusyThinking(false);
    }
    
    @Override
    protected double changeOfUsingSkill() {
        return 0.25; // 25% πιθανότητα χρήσης skill
    }
    
    @Override
    protected ShotType getShotType()
    {
        return ShotType.SOULSHOT;  // Τα βέλη δεν είναι shot type, χρησιμοποιούμε soulshot
    }

    @Override
    protected List<OOOOffensiveSpell> getOffensiveSpells()
    {
        List<OOOOffensiveSpell> spells = new ArrayList<>();
        spells.add(new OOOOffensiveSpell(1206, 15)); // Double Shot, priority 15
        spells.add(new OOOOffensiveSpell(1207, 10)); // Triple Shot, priority 10
        spells.add(new OOOOffensiveSpell(1208, 8));  // Rapid Fire, priority 8      
        return spells;
    }
    
    @Override
    protected int[][] getBuffs()
    {
        return FFFFakeHelpers.getFighterBuffs(); // Buffs για fighter class
    }
    
    @Override
    protected List<HHHHealingSpell> getHealingSpells()
    {       
        return new ArrayList<>(); // Δεν κάνει heal
    }

    @Override
    protected List<SSSSupportSpell> getSelfSupportSpells()
    {
        List<SSSSupportSpell> selfBuffs = new ArrayList<>();
        // Προσθήκη buffs με skillId και προτεραιότητα
        selfBuffs.add(new SSSSupportSpell(12015, 1));  // Παράδειγμα buff skillId=12015, priority=1
        selfBuffs.add(new SSSSupportSpell(99, 1));     // Άλλο buff
        return selfBuffs;
    }
}
